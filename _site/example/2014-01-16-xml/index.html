<!DOCTYPE html>
<html>

<head>
    <title>XML</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="keywords" content="XML, common, XML, whsellu" />
    <meta name="description" content="XML, common, XML, C Developer" />
    <meta name="theme-color" content="#2CA6CB"/>
    <link rel="shortcut icon" type="image/x-icon" media="screen" href="http://wshellu.github.io/favicon.ico" />
    <link rel="canonical" href="http://wshellu.github.io/example/2014-01-16-xml/" />
    <link rel="alternate" type="application/rss+xml" title="whsellu" href="http://wshellu.github.io/feed.xml"  />

    <link rel="stylesheet" type="text/css" href="http://apps.bdimg.com/libs/bootstrap/3.3.0/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="http://wshellu.github.io/static/octicons/octicons.css" />
    <link rel="stylesheet" type="text/css" href="http://wshellu.github.io/static/css/style.css" />

    <script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/1.11.3/jquery.js"></script>
    <script type="text/javascript" src="http://apps.bdimg.com/libs/bootstrap/3.3.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="http://wshellu.github.io/static/js/script.js"></script>
</head>


<body>
<div class="main">

    
    
    <header>
        <nav class="navbar navbar-tiffany rectangle" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="http://wshellu.github.io/">whsellu</a>
                    <p class="navbar-text">C Developer</p>
                </div>
                <div class="collapse navbar-collapse">
                    <ul class="nav navbar-nav navbar-right">
                        
                        <li>
                        <a href="http://wshellu.github.io/" class="word-keep"><span class="octicon octicon-book"></span></span>&nbsp;&nbsp;Blog</a>
                        </li>
                        
                        
                        <li>
                            <a href="http://wshellu.github.io/archive/" class="word-keep"><span class="octicon octicon-repo"></span>&nbsp;&nbsp;Archive</a>
                        </li>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <li>
                            <a href="http://wshellu.github.io/category/" class="word-keep"><span class="octicon octicon-list-unordered"></span>&nbsp;&nbsp;Category</a>
                        </li>
                        
                        
                        
                        <li>
                            <a href="http://wshellu.github.io/tags/" class="word-keep"><span class="octicon octicon-tag"></span>&nbsp;&nbsp;Tag</a>
                        </li>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <li><a href="#stq=" class="search-button"><span class="octicon octicon-search"></span></a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>



    <div class="container">
        <link rel="stylesheet" type="text/css" href="http://wshellu.github.io/static/css/highlight.css" />
<link rel="stylesheet" type="text/css" href="http://wshellu.github.io/static/css/post.css" />
<script type="text/javascript" src="http://wshellu.github.io/static/js/post.js"></script>
<script type="text/javascript" src="http://wshellu.github.io/static/js/toc.js"></script>
<div class="row">
    <div class="content col-lg-9">
        <div class="sheet post">
          <header>
            <h2>XML</h2>
            <p class="post-meta">
                <span class="octicon octicon-clock"></span> 
            </p>
            <p class="post-tag">
                <span><a href="http://wshellu.github.io/category/#common"><span class="octicon octicon-list-unordered"></span>&nbsp;common</a></span>
                <span>
                    <a class="word-keep" href="http://wshellu.github.io/tags/#XML"><span class="octicon octicon-tag"></span>&nbsp;XML</a>
                    
                </span>
            </p>
          </header>
          <hr class="boundary">
          <article>
            <div class="toc"></div>

<p>XML 文档可以包含非 ASCII 字符，为了避免错误，需要<strong>规定</strong> XML 编码，或者将 XML 文档<strong>存</strong>为 Unicode，两者需要保持一致。</p>

<p>必须包含<strong>根</strong>元素，该元素是所有其他元素的父元素。</p>

<p>所有元素都必须有<strong>关闭</strong>标签</p>

<p>对大小写<strong>敏感</strong></p>

<p>属性值须加<strong>引号</strong>，如果属性本身包含引号，就用单引号包围属性</p>

<p><code class="highlighter-rouge">&lt;</code> 和 <code class="highlighter-rouge">&amp;</code> 是非法的，用实体引用代替</p>

<p>文档中的空格不会被删节，而html只会保留1个</p>

<p>XML以 <code class="highlighter-rouge">LF</code> 存储换行</p>

<p>名称不能以数字或者标点符号或“xml”（或者 XML、Xml）开始，不能包含空格，避免<code class="highlighter-rouge">-.:</code>字符</p>

<p>元数据（有关数据的数据）应当存储为属性，而数据本身应当存储为元素。</p>

<p>Internet Explorer 5 拥有对 XML 的支持，但是 XSL 部分与 W3C 的官方标准不兼容！</p>

<p>#NameSpace</p>

<p>XML 命名空间属性被放置于元素的开始标签之中，并使用以下的语法：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>xmlns:namespace-prefix="namespaceURI"
</code></pre>
</div>
<p>默认的命名空间，省去前缀：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>xmlns="namespaceURI"
</code></pre>
</div>

<p>#构建模块</p>

<ul>
  <li>
    <p>元素</p>
  </li>
  <li>
    <p>属性</p>
  </li>
  <li>
    <p>实体</p>
  </li>
  <li>
    <p><strong>PCDATA</strong>：会被解析器解析的文本，这些文本将被解析器检查实体以及标记。解析器将能识别PCDATA包含的元素，并将其作为节点</p>
  </li>
  <li>
    <p><strong>CDATA</strong>：不会被解析器解析的文本。某些文本，比如 JavaScript 代码，包含大量 “&lt;” 或 “&amp;” 字符。为了避免错误，可以将脚本代码定义为 CDATA。</p>
  </li>
</ul>

<p>CDATA 部分由 “<code class="highlighter-rouge">&lt;![CDATA[</code>” 开始，由 “<code class="highlighter-rouge">]]&gt;</code>” 结束，包含的内容将被解析器忽略，CDATA 部分不能包含字符串 “]]&gt;”，也不允许嵌套的 ，标记 CDATA 部分结尾的 “]]&gt;” 不能包含空格或折行。：</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
<span class="o">&lt;!</span><span class="p">[</span><span class="nx">CDATA</span><span class="p">[</span>
<span class="kd">function</span> <span class="nx">matchwo</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span>
<span class="p">{</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">a</span> <span class="o">&lt;</span> <span class="nx">b</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="nx">then</span>
  <span class="p">{</span>
  <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
<span class="k">else</span>
  <span class="p">{</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">]]</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span></code></pre>
</div>

<p>#CSS</p>

<p>XML文本展示效果可以被CSS渲染，建议使用XSLT</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;</span>
<span class="cp">&lt;?xml-stylesheet type="text/css" href="cd_catalog.css"?&gt;</span>
</code></pre>
</div>

<p>#XSLT</p>

<p>XSLT 是首选的 XML 样式表语言。
XSLT (eXtensible Stylesheet Language Transformations) 远比 CSS 更加完善，XSLT 可以把 XML 文档转换为其他格式，比如 XHTML。
<a href="http://www.w3school.com.cn/xsl/index.asp">XSLT</a></p>

<p>#DTD</p>

<p>DTD：XML Type Definition ，文档类型定义，建议使用XSD</p>

<p>##XML文档定义：</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE 根元素 [元素声明]&gt;</span>
</code></pre>
</div>

<pre><code class="language-dtd">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE note [
  &lt;!ELEMENT note (to,from,heading,body)&gt;
  &lt;!ELEMENT to      (#PCDATA)&gt;
  &lt;!ELEMENT from    (#PCDATA)&gt;
  &lt;!ELEMENT heading (#PCDATA)&gt;
  &lt;!ELEMENT body    (#PCDATA)&gt;
]&gt;
&lt;note&gt;
  &lt;to&gt;George&lt;/to&gt;
  &lt;from&gt;John&lt;/from&gt;
  &lt;heading&gt;Reminder&lt;/heading&gt;
  &lt;body&gt;Don't forget the meeting!&lt;/body&gt;
&lt;/note&gt;
</code></pre>
<p><code class="highlighter-rouge">!ELEMENT note</code> (第三行)定义 note 元素有四个元素：”to、from、heading,、body”
<code class="highlighter-rouge">!ELEMENT to</code> (第四行)定义 to 元素为 “<code class="highlighter-rouge">#PCDATA</code>” 类型</p>

<p>##外部DTD</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE 根元素 SYSTEM "文件名"&gt;</span>
</code></pre>
</div>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="cp">&lt;!DOCTYPE note SYSTEM "note.dtd"&gt;</span>
<span class="nt">&lt;note&gt;</span>
<span class="nt">&lt;to&gt;</span>George<span class="nt">&lt;/to&gt;</span>
<span class="nt">&lt;from&gt;</span>John<span class="nt">&lt;/from&gt;</span>
<span class="nt">&lt;heading&gt;</span>Reminder<span class="nt">&lt;/heading&gt;</span>
<span class="nt">&lt;body&gt;</span>Don't forget the meeting!<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/note&gt;</span>
</code></pre>
</div>

<pre><code class="language-dtd">&lt;!ELEMENT note (to,from,heading,body)&gt;
&lt;!ELEMENT to (#PCDATA)&gt;
&lt;!ELEMENT from (#PCDATA)&gt;
&lt;!ELEMENT heading (#PCDATA)&gt;
&lt;!ELEMENT body (#PCDATA)&gt;
</code></pre>

<p>##元素</p>

<p>声明元素</p>

<pre><code class="language-dtd">&lt;!ELEMENT 元素名称 类别&gt;
&lt;!ELEMENT 元素名称 (元素内容)&gt;
</code></pre>
<p>空元素</p>

<pre><code class="language-dtd">&lt;!ELEMENT 元素名称 EMPTY&gt;
</code></pre>
<p>只有 PCDATA 的元素</p>

<pre><code class="language-dtd">&lt;!ELEMENT 元素名称 (#PCDATA)&gt;
</code></pre>
<p>带有任何内容的元素</p>

<pre><code class="language-dtd">&lt;!ELEMENT 元素名称 ANY&gt;
</code></pre>

<p>带有子元素（序列）的元素</p>

<p>当子元素按照由逗号分隔开的序列进行声明时，这些子元素必须按照<strong>相同的顺序</strong>出现在文档中。在一个完整的声明中，子元素也必须被声明，同时子元素也可拥有子元素。</p>

<pre><code class="language-dtd">&lt;!ELEMENT 元素名称 (子元素名称 1,子元素名称 2,.....)&gt;
</code></pre>

<p>声明元素重复出现的次数，重复标记与正则表达式相同</p>

<p>声明只出现一次的元素</p>

<pre><code class="language-dtd">&lt;!ELEMENT 元素名称 (子元素名称)&gt;
</code></pre>
<p>声明最少出现一次的元素</p>

<pre><code class="language-dtd">&lt;!ELEMENT 元素名称 (子元素名称+)&gt;
</code></pre>
<p>声明出现零次或多次的元素</p>

<pre><code class="language-dtd">&lt;!ELEMENT 元素名称 (子元素名称*)&gt;
</code></pre>
<p>声明出现零次或一次的元素</p>

<pre><code class="language-dtd">&lt;!ELEMENT 元素名称 (子元素名称?)&gt;
</code></pre>

<p>声明“或”类型的内容，第四个元素可以为message或body</p>

<pre><code class="language-dtd">&lt;!ELEMENT note (to,from,header,(message|body))&gt;
</code></pre>
<p>声明混合型的内容</p>

<pre><code class="language-dtd">&lt;!ELEMENT note (#PCDATA|to|from|header|message)*&gt;
</code></pre>

<p>##属性</p>

<p>声明属性</p>

<pre><code class="language-dtd">&lt;!ATTLIST 元素名称 属性名称 属性类型 默认值&gt;
</code></pre>

<pre><code class="language-dtd">&lt;!ATTLIST payment type CDATA "check"&gt;
</code></pre>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;payment</span> <span class="na">type=</span><span class="s">"check"</span> <span class="nt">/&gt;</span>
</code></pre>
</div>
<p><img src="http://wshellu.github.io/static/img/xml-field-type.jpg" alt="field-type" /></p>

<hr />

<p>##实体</p>

<pre><code class="language-dtd">&lt;!ENTITY 实体名称 "实体的值"&gt;
</code></pre>

<pre><code class="language-dtd">&lt;!ENTITY writer "Bill Gates"&gt;
&lt;!ENTITY copyright "Copyright W3School.com.cn"&gt;
</code></pre>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;author&gt;</span><span class="ni">&amp;writer;&amp;copyright;</span><span class="nt">&lt;/author&gt;</span>
</code></pre>
</div>
<p>外部实体声明</p>

<pre><code class="language-dtd">&lt;!ENTITY 实体名称 SYSTEM "URI/URL"&gt;
</code></pre>

<pre><code class="language-dtd">&lt;!ENTITY writer SYSTEM "http://www.w3school.com.cn/dtd/entities.dtd"&gt;
&lt;!ENTITY copyright SYSTEM "http://www.w3school.com.cn/dtd/entities.dtd"&gt;
</code></pre>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;author&gt;</span><span class="ni">&amp;writer;&amp;copyright;</span><span class="nt">&lt;/author&gt;</span>
</code></pre>
</div>

<p>##验证</p>

<p>javascript验证，load( ) 方法用于文件，而 loadXML( ) 方法用于字符串，validateOnParse设为false关闭验证</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">xmlDoc</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ActiveXObject</span><span class="p">(</span><span class="s2">"Microsoft.XMLDOM"</span><span class="p">);</span>
<span class="nx">xmlDoc</span><span class="p">.</span><span class="nx">async</span><span class="o">=</span><span class="s2">"false"</span><span class="p">;</span>
<span class="nx">xmlDoc</span><span class="p">.</span><span class="nx">validateOnParse</span><span class="o">=</span><span class="s2">"true"</span><span class="p">;</span>
<span class="nx">xmlDoc</span><span class="p">.</span><span class="nx">load</span><span class="p">(</span><span class="s2">"note_dtd_error.xml"</span><span class="p">);</span>
</code></pre>
</div>

<p>#XSD</p>

<p>XML Schema Definition，文档模式定义，是基于 XML 的 DTD 替代物。</p>

<p>与 DTD 不同，XML Schema 支持数据类型和命名空间。</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="nt">&lt;xs:schema</span> <span class="na">xmlns:xs=</span><span class="s">"http://www.w3.org/2001/XMLSchema"</span>
<span class="na">targetNamespace=</span><span class="s">"http://www.w3school.com.cn"</span>
<span class="na">xmlns=</span><span class="s">"http://www.w3school.com.cn"</span>
<span class="na">elementFormDefault=</span><span class="s">"qualified"</span><span class="nt">&gt;</span>

<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"note"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xs:complexType&gt;</span>
      <span class="nt">&lt;xs:sequence&gt;</span>
	<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"to"</span> <span class="na">type=</span><span class="s">"xs:string"</span><span class="nt">/&gt;</span>
	<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"from"</span> <span class="na">type=</span><span class="s">"xs:string"</span><span class="nt">/&gt;</span>
	<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"heading"</span> <span class="na">type=</span><span class="s">"xs:string"</span><span class="nt">/&gt;</span>
	<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"body"</span> <span class="na">type=</span><span class="s">"xs:string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/xs:sequence&gt;</span>
    <span class="nt">&lt;/xs:complexType&gt;</span>
<span class="nt">&lt;/xs:element&gt;</span>

<span class="nt">&lt;/xs:schema&gt;</span>
</code></pre>
</div>

<p>xmlns:xs 显示 schema 中<strong>用到的元素</strong>和<strong>数据类型</strong>来自哪个命名空间，同时它还规定了来自此命名空间的元素和数据类型应该使用前缀 xs；</p>

<p>targetNamespace  显示被此 schema <strong>定义的元素</strong> (note, to, from, heading, body) 来自哪个命名空间, 这意味着，如果在xml文档中使用此命名空间，那么定义的元素将可以被使用，如果不同的命名空间含有同名元素，使用前缀区分。</p>

<p>elementFormDefault=”qualified” 指出任何 XML 实例文档所使用的且在此 schema 中声明过的元素必须被命名空间限定。</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="nt">&lt;note</span>
<span class="na">xmlns=</span><span class="s">"http://www.w3school.com.cn"</span>
<span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
<span class="na">xsi:schemaLocation=</span><span class="s">"http://www.w3school.com.cn note.xsd"</span><span class="nt">&gt;</span>

<span class="nt">&lt;to&gt;</span>George<span class="nt">&lt;/to&gt;</span>
<span class="nt">&lt;from&gt;</span>John<span class="nt">&lt;/from&gt;</span>
<span class="nt">&lt;heading&gt;</span>Reminder<span class="nt">&lt;/heading&gt;</span>
<span class="nt">&lt;body&gt;</span>Don't forget the meeting!<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/note&gt;</span>
</code></pre>
</div>
<p>一旦拥有了可用的 XML Schema 实例命名空间：xmlns:xsi</p>

<p>就可以使用 schemaLocation 属性来注册命名空间，只有注册的命名空间可以被使用。此属性有两个值，第一个值是需要使用的命名空间，第二个值是供命名空间使用的 XML schema 的位置：xsi:schemaLocation</p>

<p>##元素</p>

<p><code class="highlighter-rouge">&lt;schema&gt;</code> 元素是每一个 XML Schema 的根元素</p>

<p>###简易元素</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"xxx"</span> <span class="na">type=</span><span class="s">"yyy"</span><span class="nt">/&gt;</span>
</code></pre>
</div>
<p>常用类型：
xs:string
xs:decimal
xs:integer
xs:boolean
xs:date
xs:time
缺省值</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"color"</span> <span class="na">type=</span><span class="s">"xs:string"</span> <span class="na">default=</span><span class="s">"red"</span><span class="nt">/&gt;</span>
</code></pre>
</div>
<p>固定值</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"color"</span> <span class="na">type=</span><span class="s">"xs:string"</span> <span class="na">fixed=</span><span class="s">"red"</span><span class="nt">/&gt;</span>
</code></pre>
</div>

<p>###复合元素</p>

<p>子元素包围在<code class="highlighter-rouge"> &lt;sequence&gt;</code>中，这意味着子元素必须以它们被声明的次序出现。</p>

<p>声明形式，这种类型是employee独有的</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"employee"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xs:complexType&gt;</span>
    <span class="nt">&lt;xs:sequence&gt;</span>
      <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"firstname"</span> <span class="na">type=</span><span class="s">"xs:string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"lastname"</span> <span class="na">type=</span><span class="s">"xs:string"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xs:sequence&gt;</span>
  <span class="nt">&lt;/xs:complexType&gt;</span>
<span class="nt">&lt;/xs:element&gt;</span>
</code></pre>
</div>
<p>引用形式，这种类型是共享的</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"employee"</span> <span class="na">type=</span><span class="s">"personinfo"</span><span class="nt">/&gt;</span>

<span class="nt">&lt;xs:complexType</span> <span class="na">name=</span><span class="s">"personinfo"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xs:sequence&gt;</span>
    <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"firstname"</span> <span class="na">type=</span><span class="s">"xs:string"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"lastname"</span> <span class="na">type=</span><span class="s">"xs:string"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/xs:sequence&gt;</span>
<span class="nt">&lt;/xs:complexType&gt;</span>
</code></pre>
</div>
<p>类型扩展</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"employee"</span> <span class="na">type=</span><span class="s">"fullpersoninfo"</span><span class="nt">/&gt;</span>

<span class="nt">&lt;xs:complexType</span> <span class="na">name=</span><span class="s">"personinfo"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xs:sequence&gt;</span>
    <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"firstname"</span> <span class="na">type=</span><span class="s">"xs:string"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"lastname"</span> <span class="na">type=</span><span class="s">"xs:string"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/xs:sequence&gt;</span>
<span class="nt">&lt;/xs:complexType&gt;</span>

<span class="nt">&lt;xs:complexType</span> <span class="na">name=</span><span class="s">"fullpersoninfo"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xs:complexContent&gt;</span>
    <span class="nt">&lt;xs:extension</span> <span class="na">base=</span><span class="s">"personinfo"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;xs:sequence&gt;</span>
        <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"address"</span> <span class="na">type=</span><span class="s">"xs:string"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"city"</span> <span class="na">type=</span><span class="s">"xs:string"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"country"</span> <span class="na">type=</span><span class="s">"xs:string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/xs:sequence&gt;</span>
    <span class="nt">&lt;/xs:extension&gt;</span>
  <span class="nt">&lt;/xs:complexContent&gt;</span>
<span class="nt">&lt;/xs:complexType&gt;</span>
</code></pre>
</div>

<p>###复合空元素</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"product"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xs:complexType&gt;</span>
    <span class="nt">&lt;xs:complexContent&gt;</span>
      <span class="nt">&lt;xs:restriction</span> <span class="na">base=</span><span class="s">"xs:integer"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xs:attribute</span> <span class="na">name=</span><span class="s">"prodid"</span> <span class="na">type=</span><span class="s">"xs:positiveInteger"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/xs:restriction&gt;</span>
    <span class="nt">&lt;/xs:complexContent&gt;</span>
  <span class="nt">&lt;/xs:complexType&gt;</span>
<span class="nt">&lt;/xs:element&gt;</span>
</code></pre>
</div>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"product"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xs:complexType&gt;</span>
    <span class="nt">&lt;xs:attribute</span> <span class="na">name=</span><span class="s">"prodid"</span> <span class="na">type=</span><span class="s">"xs:positiveInteger"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/xs:complexType&gt;</span>
<span class="nt">&lt;/xs:element&gt;</span>
</code></pre>
</div>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"product"</span> <span class="na">type=</span><span class="s">"prodtype"</span><span class="nt">/&gt;</span>

<span class="nt">&lt;xs:complexType</span> <span class="na">name=</span><span class="s">"prodtype"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xs:attribute</span> <span class="na">name=</span><span class="s">"prodid"</span> <span class="na">type=</span><span class="s">"xs:positiveInteger"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/xs:complexType&gt;</span>
</code></pre>
</div>

<p>###仅含元素复合类型</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"person"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xs:complexType&gt;</span>
    <span class="nt">&lt;xs:sequence&gt;</span>
      <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"firstname"</span> <span class="na">type=</span><span class="s">"xs:string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"lastname"</span> <span class="na">type=</span><span class="s">"xs:string"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xs:sequence&gt;</span>
  <span class="nt">&lt;/xs:complexType&gt;</span>
<span class="nt">&lt;/xs:element&gt;</span>
</code></pre>
</div>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"person"</span> <span class="na">type=</span><span class="s">"persontype"</span><span class="nt">/&gt;</span>

<span class="nt">&lt;xs:complexType</span> <span class="na">name=</span><span class="s">"persontype"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xs:sequence&gt;</span>
    <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"firstname"</span> <span class="na">type=</span><span class="s">"xs:string"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"lastname"</span> <span class="na">type=</span><span class="s">"xs:string"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/xs:sequence&gt;</span>
<span class="nt">&lt;/xs:complexType&gt;</span>
</code></pre>
</div>

<p>###仅含文本复合类型</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"某个名称"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xs:complexType&gt;</span>
    <span class="nt">&lt;xs:simpleContent&gt;</span>
      <span class="nt">&lt;xs:extension</span> <span class="na">base=</span><span class="s">"basetype"</span><span class="nt">&gt;</span>
        ....
        ....
      <span class="nt">&lt;/xs:extension&gt;</span>
    <span class="nt">&lt;/xs:simpleContent&gt;</span>
  <span class="nt">&lt;/xs:complexType&gt;</span>
<span class="nt">&lt;/xs:element&gt;</span>
</code></pre>
</div>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"某个名称"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xs:complexType&gt;</span>
    <span class="nt">&lt;xs:simpleContent&gt;</span>
      <span class="nt">&lt;xs:restriction</span> <span class="na">base=</span><span class="s">"basetype"</span><span class="nt">&gt;</span>
        ....
        ....
      <span class="nt">&lt;/xs:restriction&gt;</span>
    <span class="nt">&lt;/xs:simpleContent&gt;</span>
  <span class="nt">&lt;/xs:complexType&gt;</span>
<span class="nt">&lt;/xs:element&gt;</span>
</code></pre>
</div>

<p>###混合内容复合类型</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"letter"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xs:complexType</span> <span class="na">mixed=</span><span class="s">"true"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xs:sequence&gt;</span>
      <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"name"</span> <span class="na">type=</span><span class="s">"xs:string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"orderid"</span> <span class="na">type=</span><span class="s">"xs:positiveInteger"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"shipdate"</span> <span class="na">type=</span><span class="s">"xs:date"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xs:sequence&gt;</span>
  <span class="nt">&lt;/xs:complexType&gt;</span>
<span class="nt">&lt;/xs:element&gt;</span>
</code></pre>
</div>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"letter"</span> <span class="na">type=</span><span class="s">"lettertype"</span><span class="nt">/&gt;</span>

<span class="nt">&lt;xs:complexType</span> <span class="na">name=</span><span class="s">"lettertype"</span> <span class="na">mixed=</span><span class="s">"true"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xs:sequence&gt;</span>
    <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"name"</span> <span class="na">type=</span><span class="s">"xs:string"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"orderid"</span> <span class="na">type=</span><span class="s">"xs:positiveInteger"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"shipdate"</span> <span class="na">type=</span><span class="s">"xs:date"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/xs:sequence&gt;</span>
<span class="nt">&lt;/xs:complexType&gt;</span>
</code></pre>
</div>

<p>##属性</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;xs:attribute</span> <span class="na">name=</span><span class="s">"xxx"</span> <span class="na">type=</span><span class="s">"yyy"</span><span class="nt">/&gt;</span>
</code></pre>
</div>

<p>常用类型与元素相同</p>

<p>默认值与固定值用法与元素相同</p>

<p>可选的和必需的属性，在缺省的情况下，属性是可选的。如需规定属性为必选，请使用 “use” 属性：</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;xs:attribute</span> <span class="na">name=</span><span class="s">"lang"</span> <span class="na">type=</span><span class="s">"xs:string"</span> <span class="na">use=</span><span class="s">"required"</span><span class="nt">/&gt;</span>
</code></pre>
</div>

<p>##限定 / Facets</p>

<p>对值的限定</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"age"</span><span class="nt">&gt;</span>

<span class="nt">&lt;xs:simpleType&gt;</span>
  <span class="nt">&lt;xs:restriction</span> <span class="na">base=</span><span class="s">"xs:integer"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xs:minInclusive</span> <span class="na">value=</span><span class="s">"0"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xs:maxInclusive</span> <span class="na">value=</span><span class="s">"120"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/xs:restriction&gt;</span>
<span class="nt">&lt;/xs:simpleType&gt;</span>

<span class="nt">&lt;/xs:element&gt;</span>
</code></pre>
</div>
<p>枚举限定</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"car"</span><span class="nt">&gt;</span>

<span class="nt">&lt;xs:simpleType&gt;</span>
  <span class="nt">&lt;xs:restriction</span> <span class="na">base=</span><span class="s">"xs:string"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xs:enumeration</span> <span class="na">value=</span><span class="s">"Audi"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xs:enumeration</span> <span class="na">value=</span><span class="s">"Golf"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xs:enumeration</span> <span class="na">value=</span><span class="s">"BMW"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/xs:restriction&gt;</span>
<span class="nt">&lt;/xs:simpleType&gt;</span>

<span class="nt">&lt;/xs:element&gt;</span>
</code></pre>
</div>
<p>也可以写成</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"car"</span> <span class="na">type=</span><span class="s">"carType"</span><span class="nt">/&gt;</span>

<span class="nt">&lt;xs:simpleType</span> <span class="na">name=</span><span class="s">"carType"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xs:restriction</span> <span class="na">base=</span><span class="s">"xs:string"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xs:enumeration</span> <span class="na">value=</span><span class="s">"Audi"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xs:enumeration</span> <span class="na">value=</span><span class="s">"Golf"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xs:enumeration</span> <span class="na">value=</span><span class="s">"BMW"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/xs:restriction&gt;</span>
<span class="nt">&lt;/xs:simpleType&gt;</span>
</code></pre>
</div>
<p>对一系列值的限定
模式约束（pattern constraint）,类似于正则</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"password"</span><span class="nt">&gt;</span>

<span class="nt">&lt;xs:simpleType&gt;</span>
  <span class="nt">&lt;xs:restriction</span> <span class="na">base=</span><span class="s">"xs:string"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xs:pattern</span> <span class="na">value=</span><span class="s">"[a-zA-Z0-9]{8}"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/xs:restriction&gt;</span>
<span class="nt">&lt;/xs:simpleType&gt;</span>

<span class="nt">&lt;/xs:element&gt;</span>
</code></pre>
</div>

<p>对空白字符的限定</p>

<p>preserve，不会移除任何空白字符</p>

<p>replace， 将移除所有空白字符（换行、回车、空格以及制表符）</p>

<p>collapse，移除所有空白字符（换行、回车、空格以及制表符会被替换为空格，开头和结尾的空格会被移除，而多个连续的空格会被缩减为一个单一的空格）</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"address"</span><span class="nt">&gt;</span>

<span class="nt">&lt;xs:simpleType&gt;</span>
  <span class="nt">&lt;xs:restriction</span> <span class="na">base=</span><span class="s">"xs:string"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xs:whiteSpace</span> <span class="na">value=</span><span class="s">"preserve"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/xs:restriction&gt;</span>
<span class="nt">&lt;/xs:simpleType&gt;</span>

<span class="nt">&lt;/xs:element&gt;</span>
</code></pre>
</div>
<p>对长度的限定</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"password"</span><span class="nt">&gt;</span>

<span class="nt">&lt;xs:simpleType&gt;</span>
  <span class="nt">&lt;xs:restriction</span> <span class="na">base=</span><span class="s">"xs:string"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xs:length</span> <span class="na">value=</span><span class="s">"8"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/xs:restriction&gt;</span>
<span class="nt">&lt;/xs:simpleType&gt;</span>

<span class="nt">&lt;/xs:element&gt;</span>
</code></pre>
</div>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"password"</span><span class="nt">&gt;</span>

<span class="nt">&lt;xs:simpleType&gt;</span>
  <span class="nt">&lt;xs:restriction</span> <span class="na">base=</span><span class="s">"xs:string"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xs:minLength</span> <span class="na">value=</span><span class="s">"5"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xs:maxLength</span> <span class="na">value=</span><span class="s">"8"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/xs:restriction&gt;</span>
<span class="nt">&lt;/xs:simpleType&gt;</span>

<span class="nt">&lt;/xs:element&gt;</span>
</code></pre>
</div>

<p>数据类型的限定</p>

<p><img src="http://wshellu.github.io/static/img/xml-data-type.jpg" alt="data-type" /></p>

<p>##指示器</p>

<p>有七种指示器：</p>

<p>Order 指示器：用于定义元素的顺序，标签</p>

<ul>
  <li>
    <p>All：子元素可以按照任意顺序出现，且每个子元素必须只出现<strong>1</strong>次</p>
  </li>
  <li>
    <p>Choice：可出现某个子元素或者可出现另外一个子元素（非此即彼）</p>
  </li>
  <li>
    <p>Sequence：子元素必须按照特定的顺序出现：</p>
  </li>
</ul>

<p>Occurrence 指示器：用于定义某个元素出现的频率，属性</p>

<ul>
  <li>
    <p>maxOccurs：规定某个元素可出现的最大次数，（maxOccurs=”unbounded”表示不受限制）</p>
  </li>
  <li>
    <p>minOccurs：规定某个元素可出现的最小次数</p>
  </li>
</ul>

<p>Group 指示器：定义相关的数批元素，标签</p>

<ul>
  <li>
    <p>Group name：必须在 group 声明内部定义一个 all、choice 或者 sequence 元素，通过<code class="highlighter-rouge">&lt;xs:group ref="group"/&gt;</code>引用</p>
  </li>
  <li>
    <p>attributeGroup name：属性组通过 attributeGroup 声明来进行定义，子元素为<code class="highlighter-rouge">attribute</code>，通过<code class="highlighter-rouge">&lt;xs:attributeGroup ref="personattrgroup"/&gt;</code>引用</p>
  </li>
</ul>

<p>##any</p>

<p><code class="highlighter-rouge">&lt;any&gt; </code>元素使我们有能力通过未被 schema 规定的元素来拓展 XML 文档，</p>

<p>定义<code class="highlighter-rouge">&lt;any&gt;</code>元素，表示此处添加任何由其他 schema 规定的元素</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"person"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xs:complexType&gt;</span>
    <span class="nt">&lt;xs:sequence&gt;</span>
      <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"firstname"</span> <span class="na">type=</span><span class="s">"xs:string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"lastname"</span> <span class="na">type=</span><span class="s">"xs:string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;xs:any</span> <span class="na">minOccurs=</span><span class="s">"0"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xs:sequence&gt;</span>
  <span class="nt">&lt;/xs:complexType&gt;</span>
<span class="nt">&lt;/xs:element&gt;</span>
</code></pre>
</div>

<p>##anyAttribute</p>

<p><code class="highlighter-rouge">&lt;anyAttribute&gt;</code> 元素使我们有能力通过未被 schema 规定的属性来扩展 XML 文档，</p>

<p>定义<code class="highlighter-rouge">&lt;anyAttribute&gt;</code>元素，表示此处添加任何由其他 schema 规定的属性</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"person"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xs:complexType&gt;</span>
    <span class="nt">&lt;xs:sequence&gt;</span>
      <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"firstname"</span> <span class="na">type=</span><span class="s">"xs:string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"lastname"</span> <span class="na">type=</span><span class="s">"xs:string"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xs:sequence&gt;</span>
    <span class="nt">&lt;xs:anyAttribute/&gt;</span>
  <span class="nt">&lt;/xs:complexType&gt;</span>
<span class="nt">&lt;/xs:element&gt;</span>
</code></pre>
</div>

<p>##元素替换</p>

<p>可替换元素的类型必须和主元素相同，或者从主元素衍生而来。假如可替换元素的类型与主元素的类型相同，那么您就不必规定可替换元素的类型了。</p>

<p>请注意，substitutionGroup 中的所有元素（主元素和可替换元素）必须被声明为全局元素，否则就无法工作！</p>

<p>全局元素指 “schema” 元素的直接子元素！本地元素（Local elements）指嵌套在其他元素中的元素。</p>

<p>首先，我们声明主元素，然后我们会声明次元素，这些次元素可声明它们能够替换主元素。</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"name"</span> <span class="na">type=</span><span class="s">"xs:string"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"navn"</span> <span class="na">substitutionGroup=</span><span class="s">"name"</span><span class="nt">/&gt;</span>

<span class="nt">&lt;xs:complexType</span> <span class="na">name=</span><span class="s">"custinfo"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xs:sequence&gt;</span>
    <span class="nt">&lt;xs:element</span> <span class="na">ref=</span><span class="s">"name"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/xs:sequence&gt;</span>
<span class="nt">&lt;/xs:complexType&gt;</span>

<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"customer"</span> <span class="na">type=</span><span class="s">"custinfo"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"kunde"</span> <span class="na">substitutionGroup=</span><span class="s">"customer"</span><span class="nt">/&gt;</span>
</code></pre>
</div>
<p>复合此规定的xml文档格式：</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;customer&gt;</span>
  <span class="nt">&lt;name&gt;</span>John Smith<span class="nt">&lt;/name&gt;</span>
<span class="nt">&lt;/customer&gt;</span>
</code></pre>
</div>
<p>或者</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;kunde&gt;</span>
  <span class="nt">&lt;navn&gt;</span>John Smith<span class="nt">&lt;/navn&gt;</span>
<span class="nt">&lt;/kunde&gt;</span>
</code></pre>
</div>
<p>阻止元素替换</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">"name"</span> <span class="na">type=</span><span class="s">"xs:string"</span> <span class="na">block=</span><span class="s">"substitution"</span><span class="nt">/&gt;</span>
</code></pre>
</div>

<p>##数据类型</p>

<p>略，详见<a href="http://www.w3school.com.cn/schema/schema_dtypes_string.asp">W3C</a></p>

<p>#DOM</p>

<p>获取元素值</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">x</span><span class="o">=</span><span class="nx">xmlDoc</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">"title"</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="nx">txt</span><span class="o">=</span><span class="nx">x</span><span class="p">.</span><span class="nx">nodeValue</span><span class="p">;</span>
</code></pre>
</div>
<p>获取属性值</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">txt</span><span class="o">=</span><span class="nx">xmlDoc</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">"title"</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">"lang"</span><span class="p">);</span>
</code></pre>
</div>
<p>改变元素的值</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">x</span><span class="o">=</span><span class="nx">xmlDoc</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">"title"</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="nx">x</span><span class="p">.</span><span class="nx">nodeValue</span><span class="o">=</span><span class="s2">"Easy Cooking"</span><span class="p">;</span>
</code></pre>
</div>
<p>改变属性的值</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">x</span><span class="o">=</span><span class="nx">xmlDoc</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">"book"</span><span class="p">);</span>
<span class="k">for</span><span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">)</span>
  <span class="p">{</span>
  <span class="nx">x</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">"edition"</span><span class="p">,</span><span class="s2">"first"</span><span class="p">);</span>
  <span class="p">}</span>
</code></pre>
</div>
<p>创建元素</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">newel</span><span class="o">=</span><span class="nx">xmlDoc</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">"edition"</span><span class="p">);</span> <span class="c1">//创建新的元素节点。</span>
<span class="nx">newtext</span><span class="o">=</span><span class="nx">xmlDoc</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span><span class="s2">"First"</span><span class="p">);</span> <span class="c1">//创建新的文本节点</span>
<span class="nx">newel</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">newtext</span><span class="p">);</span> <span class="c1">//向节点添加子节点</span>

<span class="nx">x</span><span class="o">=</span><span class="nx">xmlDoc</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">"book"</span><span class="p">);</span>
<span class="nx">x</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">newel</span><span class="p">);</span>
</code></pre>
</div>
<p>删除元素</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">x</span><span class="o">=</span><span class="nx">xmlDoc</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">"book"</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
<span class="nx">x</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</code></pre>
</div>

<p>#解析器</p>

<p>js解析xml</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">XMLHttpRequest</span><span class="p">)</span>
  <span class="p">{</span><span class="c1">// code for IE7+, Firefox, Chrome, Opera, Safari</span>
  <span class="nx">xmlhttp</span><span class="o">=</span><span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
  <span class="p">}</span>
<span class="k">else</span>
  <span class="p">{</span><span class="c1">// code for IE6, IE5</span>
  <span class="nx">xmlhttp</span><span class="o">=</span><span class="k">new</span> <span class="nx">ActiveXObject</span><span class="p">(</span><span class="s2">"Microsoft.XMLHTTP"</span><span class="p">);</span>
  <span class="p">}</span>

<span class="nx">xmlhttp</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">"GET"</span><span class="p">,</span><span class="s2">"books.xml"</span><span class="p">,</span><span class="kc">false</span><span class="p">);</span>
<span class="nx">xmlhttp</span><span class="p">.</span><span class="nx">send</span><span class="p">();</span>
<span class="nx">xmlDoc</span><span class="o">=</span><span class="nx">xmlhttp</span><span class="p">.</span><span class="nx">responseXML</span><span class="p">;</span> 
</code></pre>
</div>
<p>js解析字符串</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">txt</span><span class="o">=</span><span class="s2">"&lt;bookstore&gt;&lt;book&gt;"</span><span class="p">;</span>
<span class="nx">txt</span><span class="o">=</span><span class="nx">txt</span><span class="o">+</span><span class="s2">"&lt;title&gt;Everyday Italian&lt;/title&gt;"</span><span class="p">;</span>
<span class="nx">txt</span><span class="o">=</span><span class="nx">txt</span><span class="o">+</span><span class="s2">"&lt;author&gt;Giada De Laurentiis&lt;/author&gt;"</span><span class="p">;</span>
<span class="nx">txt</span><span class="o">=</span><span class="nx">txt</span><span class="o">+</span><span class="s2">"&lt;year&gt;2005&lt;/year&gt;"</span><span class="p">;</span>
<span class="nx">txt</span><span class="o">=</span><span class="nx">txt</span><span class="o">+</span><span class="s2">"&lt;/book&gt;&lt;/bookstore&gt;"</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">DOMParser</span><span class="p">)</span>
  <span class="p">{</span>
  <span class="nx">parser</span><span class="o">=</span><span class="k">new</span> <span class="nx">DOMParser</span><span class="p">();</span>
  <span class="nx">xmlDoc</span><span class="o">=</span><span class="nx">parser</span><span class="p">.</span><span class="nx">parseFromString</span><span class="p">(</span><span class="nx">txt</span><span class="p">,</span><span class="s2">"text/xml"</span><span class="p">);</span>
  <span class="p">}</span>
<span class="k">else</span> <span class="c1">// Internet Explorer</span>
  <span class="p">{</span>
  <span class="nx">xmlDoc</span><span class="o">=</span><span class="k">new</span> <span class="nx">ActiveXObject</span><span class="p">(</span><span class="s2">"Microsoft.XMLDOM"</span><span class="p">);</span>
  <span class="nx">xmlDoc</span><span class="p">.</span><span class="nx">async</span><span class="o">=</span><span class="s2">"false"</span><span class="p">;</span>
  <span class="c1">//loadXML() 方法用于加载字符串（文本），load() 用于加载文件</span>
  <span class="nx">xmlDoc</span><span class="p">.</span><span class="nx">loadXML</span><span class="p">(</span><span class="nx">txt</span><span class="p">);</span>
  <span class="p">}</span>
</code></pre>
</div>
<p>访问xml节点</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">xmlDoc</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">"to"</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">nodeValue</span>
</code></pre>
</div>
<p>XMLHttpRequest</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">xmlhttp</span><span class="p">;</span>
<span class="kd">function</span> <span class="nx">loadXMLDoc</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span>
<span class="p">{</span>
<span class="nx">xmlhttp</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">XMLHttpRequest</span><span class="p">)</span>
  <span class="p">{</span><span class="c1">// code for all new browsers</span>
  <span class="nx">xmlhttp</span><span class="o">=</span><span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
  <span class="p">}</span>
<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">ActiveXObject</span><span class="p">)</span>
  <span class="p">{</span><span class="c1">// code for IE5 and IE6</span>
  <span class="nx">xmlhttp</span><span class="o">=</span><span class="k">new</span> <span class="nx">ActiveXObject</span><span class="p">(</span><span class="s2">"Microsoft.XMLHTTP"</span><span class="p">);</span>
  <span class="p">}</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">xmlhttp</span><span class="o">!=</span><span class="kc">null</span><span class="p">)</span>
  <span class="p">{</span>
  <span class="nx">xmlhttp</span><span class="p">.</span><span class="nx">onreadystatechange</span><span class="o">=</span><span class="nx">state_Change</span><span class="p">;</span>
  <span class="nx">xmlhttp</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">"GET"</span><span class="p">,</span><span class="nx">url</span><span class="p">,</span><span class="kc">true</span><span class="p">);</span>
  <span class="nx">xmlhttp</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
  <span class="p">}</span>
<span class="k">else</span>
  <span class="p">{</span>
  <span class="nx">alert</span><span class="p">(</span><span class="s2">"Your browser does not support XMLHTTP."</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">state_Change</span><span class="p">()</span>
<span class="p">{</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">xmlhttp</span><span class="p">.</span><span class="nx">readyState</span><span class="o">==</span><span class="mi">4</span><span class="p">)</span>
  <span class="p">{</span><span class="c1">// 4 = "loaded"</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">xmlhttp</span><span class="p">.</span><span class="nx">status</span><span class="o">==</span><span class="mi">200</span><span class="p">)</span>
    <span class="p">{</span><span class="c1">// 200 = OK</span>
    <span class="c1">// ...our code here...</span>
    <span class="p">}</span>
  <span class="k">else</span>
    <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s2">"Problem retrieving XML data"</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<p>#衍生产品</p>

<ul>
  <li>
    <p>XHTML
更严格更纯净的基于 XML 的 HTML 版本。</p>
  </li>
  <li>
    <p>XML DOM
访问和操作 XML 的标准文档模型。</p>
  </li>
  <li>
    <p>XSLT
XSL 包含三个部分：
XSLT - 把 XML 转换为其他格式，比如 HTML
XSL-FO - 用于格式化 XML 文档的语言
XPath - 用于在 XML 文档中导航的语言</p>
  </li>
  <li>
    <p>XQuery
基于 XML 的用于查询 XML 数据的语言。</p>
  </li>
  <li>
    <p>DTD
用于定义 XML 文档中的合法元素的标准。</p>
  </li>
  <li>
    <p>XSD
XML Schema。基于 XML 的 DTD 替代物。</p>
  </li>
  <li>
    <p>XLink
在 XML 文档中创建超级链接的语言。</p>
  </li>
  <li>
    <p>XPointer
允许 XLink 超级链接指向 XML 文档中更多具体的部分。</p>
  </li>
  <li>
    <p>XForms
使用 XML 定义表单数据。</p>
  </li>
  <li>
    <p>SOAP
允许应用程序在 HTTP 之上交换信息的基于 XML 的协议。</p>
  </li>
  <li>
    <p>WSDL
用于描述网络服务的基于 XML 的语言。</p>
  </li>
  <li>
    <p>RDF
用于描述网络资源的基于 XML 的语言。</p>
  </li>
  <li>
    <p>RSS
聚合新闻以及类新闻站点内容的格式。</p>
  </li>
  <li>
    <p>WAP
用于在无线设备上（比如移动电话）显示内容的一种基于 XML 的语言。</p>
  </li>
  <li>
    <p>SMIL
描述视听呈现的语言。</p>
  </li>
  <li>
    <p>SVG
使用 XML 格式定义图形。</p>
  </li>
</ul>


          </article>
          <hr class="boundary">
          <div id="post-share" class="bdsharebuttonbox">
              <a href="#" class="bds_more" data-cmd="more"></a>
              <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
              <a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a>
              <a href="#" class="bds_douban" data-cmd="douban" title="分享到豆瓣网"></a>
              <a href="#" class="bds_fbook" data-cmd="fbook" title="分享到Facebook"></a>
              <a href="#" class="bds_copy" data-cmd="copy" title="分享到复制网址"></a>
          </div>
        </div>
        <div class="pad-min"></div>
        <div id="post-comment" class="sheet post">
            <div id="disqus_thread"></div>
        </div>
    </div>
    <div class="content-navigation col-lg-3">
      <div class="shadow-bottom-center" >
        <div class="content-navigation-toc">
            <div class="content-navigation-header">
                <span class="octicon octicon-list-unordered"></span>&nbsp;Toc
            </div>
            <div class="content-navigation-list toc"></div>
        </div>
        <div class="content-navigation-tag">
            <div class="content-navigation-header">
                <span class="octicon octicon-list-unordered"></span>&nbsp;Tags
            </div>
            <div class="content-navigation-list">
                <ul>
                    
                    <li>
                        <a href="http://wshellu.github.io/tags#XML"><span class="octicon octicon-tag"></span>&nbsp;XML</a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <div class="content-navigation-related">
            <div class="content-navigation-header">
                <span class="octicon octicon-list-unordered"></span>&nbsp;Related
            </div>
            <div class="content-navigation-list">
                <ul>
                    

                    

                    
                </ul>
            </div>
        </div>
      </div>
    </div>
</div>
    </div>

    <div class="page-scrollTop" data-toggle="tooltip" data-placement="top" title="Top">
        <a href="javascript:void(0);">
            <div class="arrow"></div>
            <div class="stick"></div>
        </a>
    </div>
</div>

    <footer  class="footnote footnote-tiffany">
        <div class="container">
                <a class="foot-item" href="mailto:wshell84@gmail.com" target="_blank"><span class="octicon octicon-mail"></span></a>
                <a class="foot-item" href="https://github.com/wshellu" target="_blank"><span class="octicon octicon-mark-github"></span></a>
                <a class="foot-item" href="http://wshellu.github.io/feed.xml" target="_blank"><span class="octicon octicon-rss"></span></a>
                <a class="foot-item" href="http://wshellu.github.io/link/"><span class="octicon octicon-link-external"></span></a>
                &nbsp;
                <a href="http://wshellu.github.io/"><span class="word-keep">&copy; wshellu</span></a>
        </div>
    </footer>


</body>
</html>
