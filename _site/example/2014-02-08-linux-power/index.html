<!DOCTYPE html>
<html>

<head>
    <title>Linux权限管理</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="keywords" content="Linux权限管理, Linux, Linux 命令, whsellu" />
    <meta name="description" content="Linux权限管理, Linux, Linux 命令, C Developer" />
    <meta name="theme-color" content="#2CA6CB"/>
    <link rel="shortcut icon" type="image/x-icon" media="screen" href="http://wshellu.github.io/favicon.ico" />
    <link rel="canonical" href="http://wshellu.github.io/example/2014-02-08-linux-power/" />
    <link rel="alternate" type="application/rss+xml" title="whsellu" href="http://wshellu.github.io/feed.xml"  />

    <link rel="stylesheet" type="text/css" href="http://apps.bdimg.com/libs/bootstrap/3.3.0/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="http://wshellu.github.io/static/octicons/octicons.css" />
    <link rel="stylesheet" type="text/css" href="http://wshellu.github.io/static/css/style.css" />

    <script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/1.11.3/jquery.js"></script>
    <script type="text/javascript" src="http://apps.bdimg.com/libs/bootstrap/3.3.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="http://wshellu.github.io/static/js/script.js"></script>
</head>


<body>
<div class="main">

    
    
    <header>
        <nav class="navbar navbar-tiffany rectangle" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="http://wshellu.github.io/">whsellu</a>
                    <p class="navbar-text">C Developer</p>
                </div>
                <div class="collapse navbar-collapse">
                    <ul class="nav navbar-nav navbar-right">
                        
                        <li>
                        <a href="http://wshellu.github.io/" class="word-keep"><span class="octicon octicon-book"></span></span>&nbsp;&nbsp;Blog</a>
                        </li>
                        
                        
                        <li>
                            <a href="http://wshellu.github.io/archive/" class="word-keep"><span class="octicon octicon-repo"></span>&nbsp;&nbsp;Archive</a>
                        </li>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <li>
                            <a href="http://wshellu.github.io/category/" class="word-keep"><span class="octicon octicon-list-unordered"></span>&nbsp;&nbsp;Category</a>
                        </li>
                        
                        
                        
                        <li>
                            <a href="http://wshellu.github.io/tags/" class="word-keep"><span class="octicon octicon-tag"></span>&nbsp;&nbsp;Tag</a>
                        </li>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <li><a href="#stq=" class="search-button"><span class="octicon octicon-search"></span></a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>



    <div class="container">
        <link rel="stylesheet" type="text/css" href="http://wshellu.github.io/static/css/highlight.css" />
<link rel="stylesheet" type="text/css" href="http://wshellu.github.io/static/css/post.css" />
<script type="text/javascript" src="http://wshellu.github.io/static/js/post.js"></script>
<script type="text/javascript" src="http://wshellu.github.io/static/js/toc.js"></script>
<div class="row">
    <div class="content col-lg-9">
        <div class="sheet post">
          <header>
            <h2>Linux权限管理</h2>
            <p class="post-meta">
                <span class="octicon octicon-clock"></span> 
            </p>
            <p class="post-tag">
                <span><a href="http://wshellu.github.io/category/#Linux"><span class="octicon octicon-list-unordered"></span>&nbsp;Linux</a></span>
                <span>
                    <a class="word-keep" href="http://wshellu.github.io/tags/#Linux 命令"><span class="octicon octicon-tag"></span>&nbsp;Linux 命令</a>
                    
                </span>
            </p>
          </header>
          <hr class="boundary">
          <article>
            <div class="toc"></div>

<p>##<code class="highlighter-rouge">chmod</code></p>

<p><strong>改变权限</strong></p>

<p><em>数字法</em></p>

<p>root@www ~]# <code class="highlighter-rouge">chmod [-R] xyz</code> 文件或目录</p>

<p>选项与参数：</p>

<p><code class="highlighter-rouge">xyz</code> : 就是刚刚提到的数字类型的权限属性，为 rwx 属性数值的相加。</p>

<p><code class="highlighter-rouge">-R</code> : 进行递归(recursive)的持续变更，亦即连同次目录下的所有文件都会变更</p>

<p><em>符号法</em></p>

<p>chmod</p>

<p>ugoa</p>

<p>+(加入) -(除去) =(设定)</p>

<p>rwx</p>

<p>文件或目录</p>

<blockquote>
  <p>例:</p>

  <p>[root@www ~]# chmod  u=rwx,go=rx  .bashrc</p>

  <p># 注意！那个 u=rwx,go=rx 是连在一起的，中间并没有任何空格！</p>
</blockquote>

<hr />

<p>##<code class="highlighter-rouge">chgrp </code></p>

<p><strong>改变所属群组</strong></p>

<p>chgrp [root@www ~]# <code class="highlighter-rouge">chgrp [-R] filename ...</code></p>

<p>选项与参数：</p>

<p><code class="highlighter-rouge">-R</code> : 进行递归(recursive)的持续变更，亦即连同次目录下的所有文件、目录 都更新成为这个群组之意。常常用在变更某一目录内所有的文件之情况。</p>

<hr />

<p>##<code class="highlighter-rouge">chown</code></p>

<p><strong>改变文件拥有者</strong></p>

<p>[root@www ~]# <code class="highlighter-rouge">chown [-R]</code> 账号名称 文件或目录</p>

<p>[root@www ~]# <code class="highlighter-rouge">chown [-R]</code> 账号名称:组名 文件或目录</p>

<p>选项与参数：</p>

<p><code class="highlighter-rouge">-R</code> : 进行递归(recursive)的持续变更，亦即连同次目录下的所有文件都变更</p>

<hr />

<p>##<code class="highlighter-rouge">chattr</code></p>

<p><strong>配置文件隐藏属性</strong></p>

<p>[root@www ~]# <code class="highlighter-rouge">chattr [+-=][ASacdistu]</code> 文件或目录名称</p>

<p>选项与参数：</p>

<p><code class="highlighter-rouge">+</code>   ：添加某一个特殊参数，其他原本存在参数则不动。</p>

<p><code class="highlighter-rouge">-</code>   ：移除某一个特殊参数，其他原本存在参数则不动。</p>

<p><code class="highlighter-rouge">=</code>   ：配置一定，且仅有后面接的参数</p>

<blockquote>
  <p><code class="highlighter-rouge">A</code>  ：当配置了 A 这个属性时，若你有存取此文件(或目录)时，他的存取时间 atime将不会被修改，可避免I/O较慢的机器过度的存取磁碟。这对速度较慢的计算机有帮助。</p>
</blockquote>

<p><code class="highlighter-rouge">S</code>  ：一般文件是非同步写入磁碟的(原理请参考第五章sync的说明)，如果加上 S 这个属性时，当你进行任何文件的修改，该更动会『同步』写入磁碟中。</p>

<p><code class="highlighter-rouge">a</code>  ：当配置 a 之后，这个文件将只能添加数据，而不能删除也不能修改数据，只有root才能配置这个属性。</p>

<p><code class="highlighter-rouge">c</code> ：这个属性配置之后，将会自动的将此文件『压缩』，在读取的时候将会自动解压缩，但是在储存的时候，将会先进行压缩后再储存(看来对於大文件似乎蛮有用的！)</p>

<p><code class="highlighter-rouge">d</code>  ：当 dump 程序被运行的时候，配置 d 属性将可使该文件(或目录)不会被 dump 备份</p>

<p><code class="highlighter-rouge">i</code>  ：这个 i 可就很厉害了！他可以让一个文件『不能被删除、改名、配置连结也无法写入或新增数据！』对於系统安全性有相当大的助益！只有 root 能配置此属性</p>

<p><code class="highlighter-rouge">s</code>  ：当文件配置了 s 属性时，如果这个文件被删除，他将会被完全的移除出这个硬盘空间，所以如果误删了，完全无法救回来了喔！</p>

<p><code class="highlighter-rouge">u</code>  ：与 s 相反的，当使用 u 来配置文件时，如果该文件被删除了，则数据内容其实还存在磁碟中，可以使用来救援该文件喔！</p>

<p>注意：属性配置常见的是 a 与 i 的配置值，而且很多配置值必须要身为 root 才能配置</p>

<hr />

<p>##<code class="highlighter-rouge">lsattr</code></p>

<p><strong>显示文件隐藏属性</strong></p>

<p>[root@www ~]# <code class="highlighter-rouge">lsattr [-adR]</code> 文件或目录</p>

<p>选项与参数：</p>

<p><code class="highlighter-rouge">-a</code> ：将隐藏档的属性也秀出来；</p>

<p><code class="highlighter-rouge">-d</code> ：如果接的是目录，仅列出目录本身的属性而非目录内的档名；</p>

<p><code class="highlighter-rouge">-R</code> ：连同子目录的数据也一并列出来！</p>

<hr />

<p>##<code class="highlighter-rouge">umask</code></p>

<p><strong>被排除的权限默认值</strong></p>

<p><em>目前使用者在创建文件或目录时候的被排除的权限默认值</em></p>

<p>[root@www ~]# <code class="highlighter-rouge">umask</code>      显示<code class="highlighter-rouge">数字</code>型态的权限配置分数</p>

<p>0022          &lt;==与一般权限有关的是后面三个数字，表示在777中被排除的权限，即该目录中新增文件或目录的默认权限为755，又因为新增文件默认不具有x权限，所以该目录中新增目录的默认权限为755，文件的默认权限为644</p>

<p>[root@www ~]# <code class="highlighter-rouge">umask -S</code>    以<code class="highlighter-rouge">符号</code>类型的方式来显示出权限</p>

<p>u=rwx,g=rx,o=rx</p>

<p>[root@www ~]# <code class="highlighter-rouge">umask 002</code>  <code class="highlighter-rouge">指定</code>权限配置分数</p>

<p><code class="highlighter-rouge">!</code> 异或运算可排除权限</p>

<hr />

<p>##文件特殊权限</p>

<p><strong><code class="highlighter-rouge">SUID</code></strong></p>

<blockquote>
  <p><code class="highlighter-rouge">1</code> SUID 权限仅对二进位程序(binary program)有效；(对目录无效)</p>
</blockquote>

<blockquote>
  <p><code class="highlighter-rouge">2</code> 运行者对於该程序需要具有 x 权限；</p>
</blockquote>

<blockquote>
  <p><code class="highlighter-rouge">3</code> 运行者将具有该程序拥有者 (owner) 的权限，该权限仅在运行该程序的过程中有效 (run-time)</p>
</blockquote>

<blockquote>
  <p>例如：/etc/shadow只有root能够访问，但是普通用户对于passwd有s权限，passwd的owner是root，所以普通用户可以在运行passwd时暂时获得root权限对/etc/shadow进行操作。</p>
</blockquote>

<p><code class="highlighter-rouge">!</code> SUID权限指的是文件权限中owner部分x权限的特殊版</p>

<p><code class="highlighter-rouge">! chmod 4---</code> 可以赋予SUID权限，所属用户的x位将变成s, 若不具备x权限，s将变成S</p>

<p><strong><code class="highlighter-rouge">SGID</code></strong></p>

<p><em>当为文件时</em></p>

<blockquote>
  <p><code class="highlighter-rouge">1</code> SGID 仅对二进位程序有用；</p>

  <p><code class="highlighter-rouge">2</code> 运行者对於该程序需具有x 权限；</p>

  <p><code class="highlighter-rouge">3</code> 运行者在运行的过程中将会获得该程序群组（group）的权限,该权限仅在运行该程序的过程中有效 (run-time) — 基本同SUID</p>
</blockquote>

<p><em>当为目录时</em></p>

<blockquote>
  <p><code class="highlighter-rouge">1</code> 使用者若对於此目录具有 r 与 x 的权限时，该使用者能够进入此目录；</p>

  <p><code class="highlighter-rouge">2</code> 使用者在此目录下的有效群组(effective group)将会变成该目录所属的群组；用途：若使用者在此目录下具有 w 的权限(可以新建文件)，则使用者所创建的新文件的群组与此目录所属的群组相同。</p>
</blockquote>

<p><code class="highlighter-rouge">!</code> SGID权限指的是文件或目录权限中group部分x权限的特殊版
<code class="highlighter-rouge">! chmod 2---</code> 可以赋予SGID权限，所属组的x位将变成s, 若不具备x权限，s将变成S</p>

<p><strong><code class="highlighter-rouge">SBIT</code></strong></p>

<p>·SBIT权限仅对目录有效；（对文件无效）</p>

<p>·使用者对於此目录需要具有 w, x 权限；</p>

<p>·当使用者在该目录下创建文件或目录时，仅有自己与 root 才有权力删除该文件</p>

<p><code class="highlighter-rouge">! chmod 1---</code> 可以赋予SBIT权限，其他的x位将变成t</p>

          </article>
          <hr class="boundary">
          <div id="post-share" class="bdsharebuttonbox">
              <a href="#" class="bds_more" data-cmd="more"></a>
              <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
              <a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a>
              <a href="#" class="bds_douban" data-cmd="douban" title="分享到豆瓣网"></a>
              <a href="#" class="bds_fbook" data-cmd="fbook" title="分享到Facebook"></a>
              <a href="#" class="bds_copy" data-cmd="copy" title="分享到复制网址"></a>
          </div>
        </div>
        <div class="pad-min"></div>
        <div id="post-comment" class="sheet post">
            <div id="disqus_thread"></div>
        </div>
    </div>
    <div class="content-navigation col-lg-3">
      <div class="shadow-bottom-center" >
        <div class="content-navigation-toc">
            <div class="content-navigation-header">
                <span class="octicon octicon-list-unordered"></span>&nbsp;Toc
            </div>
            <div class="content-navigation-list toc"></div>
        </div>
        <div class="content-navigation-tag">
            <div class="content-navigation-header">
                <span class="octicon octicon-list-unordered"></span>&nbsp;Tags
            </div>
            <div class="content-navigation-list">
                <ul>
                    
                    <li>
                        <a href="http://wshellu.github.io/tags#Linux 命令"><span class="octicon octicon-tag"></span>&nbsp;Linux 命令</a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <div class="content-navigation-related">
            <div class="content-navigation-header">
                <span class="octicon octicon-list-unordered"></span>&nbsp;Related
            </div>
            <div class="content-navigation-list">
                <ul>
                    

                    

                    
                </ul>
            </div>
        </div>
      </div>
    </div>
</div>
    </div>

    <div class="page-scrollTop" data-toggle="tooltip" data-placement="top" title="Top">
        <a href="javascript:void(0);">
            <div class="arrow"></div>
            <div class="stick"></div>
        </a>
    </div>
</div>

    <footer  class="footnote footnote-tiffany">
        <div class="container">
                <a class="foot-item" href="mailto:wshell84@gmail.com" target="_blank"><span class="octicon octicon-mail"></span></a>
                <a class="foot-item" href="https://github.com/wshellu" target="_blank"><span class="octicon octicon-mark-github"></span></a>
                <a class="foot-item" href="http://wshellu.github.io/feed.xml" target="_blank"><span class="octicon octicon-rss"></span></a>
                <a class="foot-item" href="http://wshellu.github.io/link/"><span class="octicon octicon-link-external"></span></a>
                &nbsp;
                <a href="http://wshellu.github.io/"><span class="word-keep">&copy; wshellu</span></a>
        </div>
    </footer>


</body>
</html>
